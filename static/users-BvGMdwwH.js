import{m as o}from"./main-f0Mg-34g.js";document.addEventListener("alpine:init",()=>{o.data("userTable",()=>({users:[],filteredUsers:[],selectedUsers:[],currentPage:1,itemsPerPage:10,searchQuery:"",statusFilter:"",roleFilter:"",sortField:"name",sortDirection:"asc",isLoading:!1,init(){this.loadSampleData(),this.filterUsers(),this.$nextTick(()=>{this.initCharts()})},loadSampleData(){this.users=[{id:1,name:"John Doe",email:"john@example.com",role:"admin",status:"active",lastActive:"2 minutes ago",joinDate:"2023-01-15",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 123-4567",department:"Engineering"},{id:2,name:"Jane Smith",email:"jane@example.com",role:"user",status:"active",lastActive:"1 hour ago",joinDate:"2023-02-20",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 987-6543",department:"Marketing"},{id:3,name:"Mike Johnson",email:"mike@example.com",role:"moderator",status:"pending",lastActive:"1 day ago",joinDate:"2023-03-10",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 456-7890",department:"Support"},{id:4,name:"Sarah Wilson",email:"sarah@example.com",role:"user",status:"active",lastActive:"5 minutes ago",joinDate:"2023-04-05",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 321-0987",department:"Sales"},{id:5,name:"Bob Brown",email:"bob@example.com",role:"user",status:"inactive",lastActive:"1 week ago",joinDate:"2023-01-30",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 654-3210",department:"HR"},{id:6,name:"Alice Davis",email:"alice@example.com",role:"admin",status:"active",lastActive:"30 minutes ago",joinDate:"2022-12-01",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 789-0123",department:"Engineering"},{id:7,name:"Tom Miller",email:"tom@example.com",role:"user",status:"active",lastActive:"3 hours ago",joinDate:"2023-05-15",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 147-2580",department:"Design"},{id:8,name:"Lisa Garcia",email:"lisa@example.com",role:"moderator",status:"active",lastActive:"1 hour ago",joinDate:"2023-03-25",avatar:"/assets/images/avatar-placeholder.svg",phone:"+1 (555) 369-1470",department:"Support"}]},filterUsers(){this.filteredUsers=this.users.filter(e=>{const s=this.searchQuery===""||e.name.toLowerCase().includes(this.searchQuery.toLowerCase())||e.email.toLowerCase().includes(this.searchQuery.toLowerCase())||e.department.toLowerCase().includes(this.searchQuery.toLowerCase()),t=this.statusFilter===""||e.status===this.statusFilter,a=this.roleFilter===""||e.role===this.roleFilter;return s&&t&&a}),this.sortUsers(),this.currentPage=1},sortBy(e){this.sortField===e?this.sortDirection=this.sortDirection==="asc"?"desc":"asc":(this.sortField=e,this.sortDirection="asc"),this.sortUsers()},sortUsers(){this.filteredUsers.sort((e,s)=>{let t=e[this.sortField],a=s[this.sortField];return typeof t=="string"&&(t=t.toLowerCase(),a=a.toLowerCase()),this.sortDirection==="asc"?t>a?1:-1:t<a?1:-1})},get paginatedUsers(){const e=(this.currentPage-1)*this.itemsPerPage,s=e+this.itemsPerPage;return this.filteredUsers.slice(e,s)},get totalPages(){return Math.ceil(this.filteredUsers.length/this.itemsPerPage)},get visiblePages(){const s=[],t=[];for(let a=Math.max(2,this.currentPage-2);a<=Math.min(this.totalPages-1,this.currentPage+2);a++)s.push(a);return this.currentPage-2>2?t.push(1,"..."):t.push(1),t.push(...s),this.currentPage+2<this.totalPages-1?t.push("...",this.totalPages):this.totalPages>1&&t.push(this.totalPages),t.filter((a,r,i)=>i.indexOf(a)===r&&a<=this.totalPages)},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},toggleAll(e){e?this.selectedUsers=this.paginatedUsers.map(s=>s.id):this.selectedUsers=[]},toggleUser(e,s){s.target.checked?this.selectedUsers.includes(e)||this.selectedUsers.push(e):this.selectedUsers=this.selectedUsers.filter(t=>t!==e)},createUser(e){const s={id:this.users.length+1,name:`${e.firstName} ${e.lastName}`,email:e.email,role:e.role,status:e.status,phone:e.phone,lastActive:"Just now",joinDate:new Date().toISOString().split("T")[0],avatar:"/assets/images/avatar-placeholder.svg",department:"New"};this.users.push(s),this.filterUsers()},editUser(e){const s=o.$data(document.querySelector('[x-data="userForm"]'));if(s){const t=e.name.split(" ");s.form.firstName=t[0]||"",s.form.lastName=t.slice(1).join(" ")||"",s.form.email=e.email,s.form.role=e.role,s.form.status=e.status,s.form.phone=e.phone,s.editingUserId=e.id}},viewUser(e){console.log("Viewing user:",e)},deleteUser(e){confirm(`Are you sure you want to delete ${e.name}?`)&&(this.users=this.users.filter(s=>s.id!==e.id),this.filterUsers())},bulkAction(e){if(this.selectedUsers.length===0){alert("Please select users first");return}const s=this.users.filter(t=>this.selectedUsers.includes(t.id));switch(e){case"activate":s.forEach(t=>t.status="active");break;case"deactivate":s.forEach(t=>t.status="inactive");break;case"delete":confirm(`Are you sure you want to delete ${this.selectedUsers.length} users?`)&&(this.users=this.users.filter(t=>!this.selectedUsers.includes(t.id)));break}this.selectedUsers=[],this.filterUsers()},exportUsers(){const e=this.generateCSV(this.filteredUsers);this.downloadCSV(e,"users-export.csv")},generateCSV(e){const s=["ID","Name","Email","Role","Status","Department","Phone","Join Date","Last Active"],t=e.map(a=>[a.id,a.name,a.email,a.role,a.status,a.department,a.phone,a.joinDate,a.lastActive]);return[s,...t].map(a=>a.join(",")).join(`
`)},downloadCSV(e,s){const t=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(t);a.setAttribute("href",r),a.setAttribute("download",s),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},sendBulkInvites(){if(this.selectedUsers.length===0){alert("Please select users to send invites to");return}alert(`Sent invites to ${this.selectedUsers.length} users`),this.selectedUsers=[]},generateReport(){const e={generatedAt:new Date().toISOString(),totalUsers:this.users.length,stats:this.stats,departmentBreakdown:this.departmentStats,recentActivity:this.recentActivities},s=JSON.stringify(e,null,2);this.downloadCSV(s,"user-report.json")},get stats(){const e=this.users.filter(i=>i.status==="active").length,s=this.users.filter(i=>i.status==="pending").length,t=this.users.filter(i=>i.status==="inactive").length,a=new Date,r=this.users.filter(i=>{const n=new Date(i.joinDate);return n.getMonth()===a.getMonth()&&n.getFullYear()===a.getFullYear()}).length;return{total:this.users.length,active:e,pending:s,inactive:t,newThisMonth:r,activePercentage:this.users.length>0?e/this.users.length*100:0,pendingPercentage:this.users.length>0?s/this.users.length*100:0,inactivePercentage:this.users.length>0?t/this.users.length*100:0}},get departmentStats(){const e=this.users.reduce((t,a)=>(t[a.department]=(t[a.department]||0)+1,t),{}),s=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"];return Object.entries(e).map(([t,a],r)=>({name:t,count:a,percentage:this.users.length>0?Math.round(a/this.users.length*100):0,color:s[r%s.length]}))},get recentActivities(){return[{id:1,user:"John Doe",action:"logged in",time:"2 minutes ago",type:"login",icon:"bi-box-arrow-in-right",details:"User logged in from Chrome on Windows"},{id:2,user:"Jane Smith",action:"updated profile",time:"1 hour ago",type:"update",icon:"bi-person-gear",details:"Updated contact information and preferences"},{id:3,user:"Mike Johnson",action:"created account",time:"1 day ago",type:"create",icon:"bi-person-plus",details:"New user account created and activated"},{id:4,user:"Sarah Wilson",action:"changed password",time:"2 days ago",type:"security",icon:"bi-shield-lock",details:"Password changed for security reasons"},{id:5,user:"Bob Brown",action:"logged out",time:"1 week ago",type:"logout",icon:"bi-box-arrow-right",details:"User logged out from all devices"}]},get systemAlerts(){return[{id:1,title:"User Registration Alert",message:"New user registrations require approval",type:"warning",time:"5 minutes ago"},{id:2,title:"Backup Complete",message:"System backup completed successfully",type:"success",time:"1 hour ago"},{id:3,title:"Maintenance Notice",message:"Database maintenance scheduled for tonight",type:"info",time:"2 hours ago"}]},initCharts(){const e=document.querySelector("#activeUserChart");if(e&&!e.hasAttribute("data-chart-initialized")){e.setAttribute("data-chart-initialized","true");const a={series:[{name:"Active Users",data:[65,70,80,85,90,95,88]}],chart:{type:"line",height:50,sparkline:{enabled:!0}},stroke:{curve:"smooth",width:2},colors:["#10b981"]};new ApexCharts(e,a).render()}const s=document.querySelector("#userGrowthChart");if(s&&!s.hasAttribute("data-chart-initialized")){s.setAttribute("data-chart-initialized","true");const a={series:[{name:"New Users",data:[5,8,12,15,10,18,22]}],chart:{type:"bar",height:250,width:"100%",toolbar:{show:!1},parentHeightOffset:0,offsetX:0,offsetY:0,zoom:{enabled:!1},selection:{enabled:!1}},responsive:[{breakpoint:768,options:{chart:{height:200}}}],colors:["#6366f1"],plotOptions:{bar:{borderRadius:4,columnWidth:"50%",barHeight:"70%",distributed:!1}},xaxis:{categories:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],axisBorder:{show:!1},axisTicks:{show:!1},labels:{style:{fontSize:"12px",colors:"#64748b"}}},yaxis:{show:!1},grid:{show:!1},dataLabels:{enabled:!1},tooltip:{theme:"light"}};new ApexCharts(s,a).render()}const t=document.querySelector("#roleDistributionChart");if(t&&!t.hasAttribute("data-chart-initialized")){t.setAttribute("data-chart-initialized","true");const a=this.users.reduce((i,n)=>(i[n.role]=(i[n.role]||0)+1,i),{}),r={series:Object.values(a),chart:{type:"donut",height:140},labels:Object.keys(a),colors:["#6366f1","#10b981","#f59e0b","#ef4444"],legend:{show:!1},plotOptions:{pie:{donut:{size:"70%"}}},dataLabels:{enabled:!1},tooltip:{theme:"light"},responsive:[{breakpoint:480,options:{chart:{width:200}}}]};new ApexCharts(t,r).render()}}})),o.data("searchComponent",()=>({query:"",results:[],isLoading:!1,async search(){if(this.query.length<2){this.results=[];return}this.isLoading=!0,await new Promise(s=>setTimeout(s,300)),this.results=[{title:"Dashboard",url:"/",type:"page"},{title:"Users",url:"/users.html",type:"page"},{title:"Settings",url:"/settings.html",type:"page"},{title:"Analytics",url:"/analytics.html",type:"page"},{title:"Security",url:"/security.html",type:"page"},{title:"Help",url:"/help.html",type:"page"}].filter(s=>s.title.toLowerCase().includes(this.query.toLowerCase()));const e=o.$data(document.querySelector('[x-data="userTable"]'));e&&(e.searchQuery=this.query,e.filterUsers()),this.isLoading=!1}})),o.data("themeSwitch",()=>({currentTheme:"light",init(){this.currentTheme=localStorage.getItem("theme")||"light",this.applyTheme()},toggle(){this.currentTheme=this.currentTheme==="light"?"dark":"light",this.applyTheme(),localStorage.setItem("theme",this.currentTheme)},applyTheme(){document.documentElement.setAttribute("data-bs-theme",this.currentTheme)}})),o.data("userForm",()=>({form:{firstName:"",lastName:"",email:"",role:"user",status:"active",phone:""},editingUserId:null,init(){this.resetForm()},resetForm(){this.form={firstName:"",lastName:"",email:"",role:"user",status:"active",phone:""},this.editingUserId=null},saveUser(){if(!this.form.firstName||!this.form.lastName||!this.form.email){alert("Please fill in all required fields");return}const e=o.$data(document.querySelector('[x-data="userTable"]'));if(!e)return;if(this.editingUserId){const t=e.users.find(a=>a.id===this.editingUserId);t&&(t.name=`${this.form.firstName} ${this.form.lastName}`,t.email=this.form.email,t.role=this.form.role,t.status=this.form.status,t.phone=this.form.phone,e.filterUsers())}else e.createUser(this.form);const s=document.querySelector("#userModal");if(s){const t=bootstrap.Modal.getInstance(s);t&&t.hide()}this.resetForm()}}))});
